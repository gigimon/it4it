Рисуем с помощью PIL
####################
:date: 2009-01-16 14:58
:author: gigimon
:category: Python
:tags: pil, Python, рисование
:slug: risuem-s-pomoshhyu-pil

Недавно потребовалось мне создавать картинку на лету. Решил спользовать
библиотеку для питона PIL. Она поддерживает кучу форматов, а также
множество цветовых систем (RGB, RGBA и более простые). Итак, рассмотрим
простейшее, как создать рисунок и что-либо на нем нарисовать.

|image0|

Для начала, подключим нужные модули.

.. code-block:: python

    from PIL import Image, ImageDraw

Модуль Image управляет непосредственно источником изображения, позволяет
создавать, сохранять, октрывать рисунок. А ImageDraw, отвечает
непосредственно за рисование геометрических объектов.

Теперь создадим новый рисунок:

.. code-block:: python

    image = Image.new("RGBA", (320,320), (0,0,0,0))

Здесь, первый параметр это тип картинки, может быть: 1 (черно-белый), L
(монохромный, оттенки серого), RGB, RGBA (RGB с альфа каналом), CMYK,
YCbCr, I (32 bit Integer pixels), F (32 bit Float pixels).

Второй параметр, это объект типа tuple задающий размер изображения.

Третий параметр, это непосредственно цвет, т.к. у нас RGBA, то запись
(0,0,0,0) соответствует полной прозрачности.

После этого, чтобы нарисовать на нем что-либо, требуется создать объект
ImageDraw и передать ему наш рисунок:

.. code-block:: python

    draw = ImageDraw.Draw(image)

Попробуем нарисовать красный эллипс:

.. code-block:: python

    draw. ellipse((10,10,300,300), fill="red", outline="red")

Здесь мы рсиуем эллипс,   с координатами начальными: 10,10, и конечными:
300,300. Также, параметр fill задает цвет заливки, а outline - цвет
контура. Помимо кодовых названий, можно использовать HTML запись, либо
RGB(A) в виде tuple элемента.

Из доступных для рисования фигур доступны: кривая, линия, текст,
вырезаный эллипс, точка, полигон.

После этого удалим draw и сохраним рисунок:

.. code-block:: python

    del draw
    image.save("/path/to/save/test.png", "PNG")

После этого мы получи .png файл, в котором будет красный круг на
прозрачном фоне :

|Пример|

Вот, думаю для начального понимания поможет кому-нибудь.

Нашел `краткую документацию`_ по официальной документации.

Официальный  `сайт`_ с документацией

.. _краткую документацию: {filename}/images/2009/01/pil.pdf
.. _сайт: http://www.pythonware.com/library/pil/handbook/index.htm

.. |image0| image:: http://www.it4it.ru/wp-includes/js/tinymce/plugins/wordpress/img/trans.gif
.. |Пример| image:: {filename}/images/2009/01/test.png
